<Window x:Class="BitnuaVideoPlayer.PresentaionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Vlc="clr-namespace:Vlc.DotNet.Wpf;assembly=Vlc.DotNet.Wpf"
        xmlns:wpf="clr-namespace:CefSharp.Wpf;assembly=CefSharp.Wpf"
        xmlns:my="clr-namespace:BitnuaVideoPlayer"
        Title="MainWindow"
        Height="{my:SettingBinding  prWindow.Height}"
        Width="{my:SettingBinding   prWindow.Width}"
        Left="{my:SettingBinding    prWindow.Left}"
        Top="{my:SettingBinding     prWindow.Top}">
    <Window.Resources>
        <my:GridLengthConverter x:Key="gridLengthConverter" />
        <my:ColorToSolidColorBrushValueConverter x:Key="colorCnv"/>
        <my:NullVisibilityConverter x:Key="NullToVisibilityConverter"/>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <my:EnumBooleanConverter x:Key="enumToBool"/>
        <my:StringToEnumConverter x:Key="stringToEnum"/>
        
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="{Binding VideoCtrlHeight, Mode=TwoWay, Converter={StaticResource gridLengthConverter}}"/>
            <RowDefinition Height="5" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="5" />
                <ColumnDefinition Width="{Binding VideoCtrlWidth, Mode=TwoWay, Converter={StaticResource gridLengthConverter}}"/>
            </Grid.ColumnDefinitions>
            <!--LeftPanel - Pics-->
            <StackPanel Grid.Column="0" 
                        Tag="{Binding Path=SelectedPicMode, Converter={StaticResource enumToBool}, ConverterParameter=Pics}"
                        Visibility="{Binding Tag, RelativeSource={RelativeSource Self}, Converter={StaticResource BoolToVis}}" >
                <Label HorizontalAlignment="Stretch" 
                       VerticalAlignment="Stretch"
                       HorizontalContentAlignment="Center"
                       VerticalContentAlignment="Center"
                       
                       Background ="{Binding LeftPicTitle.BackColor, Converter={StaticResource colorCnv}}"
                       Foreground ="{Binding LeftPicTitle.ForeColor, Converter={StaticResource colorCnv}}"
                       Content    ="{Binding LeftPicTitle.Text}" 
                       FontSize   ="{Binding LeftPicTitle.FontSize}" 
                       FontFamily ="{Binding LeftPicTitle.FontFamily}" 
                       />
                <Image x:Name="m_LeftPic"
                       Source="{Binding LeftPicSource}"
                       StretchDirection="Both"
                       Stretch="{Binding LeftPicStretch, Mode=OneWay, Converter={StaticResource stringToEnum}}"
                       />
            </StackPanel>

            <!--LeftPanel - Lyrics-->
            <Grid Grid.Column="0" 
                        Tag="{Binding Path=SelectedPicMode, Converter={StaticResource enumToBool}, ConverterParameter=Lyrics}"
                        Visibility="{Binding Tag, RelativeSource={RelativeSource Self}, Converter={StaticResource BoolToVis}}" >
                <Viewbox Stretch="Fill" StretchDirection="Both">
                    
                <TextBlock TextWrapping="Wrap" 
                           TextAlignment="Right"
                           Padding="4"
                           Text="{Binding Lyrics.Text}" 
                           FontSize="{Binding Lyrics.FontSize}" 
                           FontFamily="{Binding Lyrics.FontFamily}"
                           Background="{Binding Lyrics.BackColor,Converter={StaticResource colorCnv}}"
                           Foreground="{Binding Lyrics.ForeColor,Converter={StaticResource colorCnv}}"/>
                </Viewbox>
            </Grid>

            <!--LeftPanel - Flyer-->
            <StackPanel Grid.Column="0" 
                        Tag="{Binding Path=SelectedPicMode, Converter={StaticResource enumToBool}, ConverterParameter=Flyer}"
                        Visibility="{Binding Tag, RelativeSource={RelativeSource Self}, Converter={StaticResource BoolToVis}}" >
            </StackPanel>

            <GridSplitter Grid.Column="1"
                          Width="5"
                          HorizontalAlignment="Stretch" />
            <Vlc:VlcControl x:Name="VlcControl"
                            Grid.Column="2" />
        </Grid>


        <GridSplitter Grid.Row="1"
                      Height="5"
                      HorizontalAlignment="Stretch" />
        <Grid Grid.Row="2"
              x:Name="statusGrid">
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Grid FlowDirection="RightToLeft">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="9*"/>
                </Grid.ColumnDefinitions>
                <Image x:Name="m_ArtistPic"
                       Grid.RowSpan="2"
                       Source="{Binding ArtistPicSource}"
                       StretchDirection="Both"
                       Stretch="Fill"
                       />

                <StackPanel Orientation="Horizontal" Grid.Column="1">
                    <TextBlock Text="{Binding Song.Title}" FontSize="{Binding SongTitleFontSize}"
                               VerticalAlignment="Bottom"/>
                    <TextBlock FontSize="{Binding Song2ndFontSize}" Margin="4,0" VerticalAlignment="Bottom"
                               Visibility="{Binding Song.Year, Converter={StaticResource NullToVisibilityConverter}}">
                        <Run>(</Run>
                        <Run Text="{Binding Song.Year}"/>
                        <Run>)</Run>
                    </TextBlock>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="1">
                    <TextBlock Text="יוצר" FontSize="{Binding Song2ndFontSize}"
                               Visibility="{Binding Song.Creator, Converter={StaticResource NullToVisibilityConverter}}"/>
                    <TextBlock Text="{Binding Song.Creator}" FontSize="{Binding Song2ndFontSize}" FontWeight="Bold" Margin="10,0,25,0"
                               Visibility="{Binding Song.Creator, Converter={StaticResource NullToVisibilityConverter}}"/>

                    <TextBlock Text="מבצע" FontSize="{Binding Song2ndFontSize}"
                               Visibility="{Binding Song.Performer, Converter={StaticResource NullToVisibilityConverter}}"/>
                    <TextBlock Text="{Binding Song.Performer}" FontSize="{Binding Song2ndFontSize}" FontWeight="Bold" Margin="10,0,25,0"
                               Visibility="{Binding Song.Performer, Converter={StaticResource NullToVisibilityConverter}}"/>

                    <TextBlock Text="לחן" FontSize="{Binding Song2ndFontSize}"
                               Visibility="{Binding Song.Composer, Converter={StaticResource NullToVisibilityConverter}}"/>
                    <TextBlock Text="{Binding Song.Composer}" FontSize="{Binding Song2ndFontSize}" FontWeight="Bold" Margin="10,0,25,0"
                               Visibility="{Binding Song.Composer, Converter={StaticResource NullToVisibilityConverter}}"/>

                    <TextBlock Text="משורר" FontSize="{Binding Song2ndFontSize}" 
                               Visibility="{Binding Song.Writer, Converter={StaticResource NullToVisibilityConverter}}"/>
                    <TextBlock Text="{Binding Song.Writer}" FontSize="{Binding Song2ndFontSize}" FontWeight="Bold" Margin="10,0,25,0"
                               Visibility="{Binding Song.Writer, Converter={StaticResource NullToVisibilityConverter}}"/>

                </StackPanel>
            </Grid>
            <wpf:ChromiumWebBrowser Grid.Row="2"
                                    x:Name="browser" 
                                    ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                    IsEnabled="False"
                                    Height="60px"/>

            
        </Grid>

    </Grid>
</Window>
